<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<!-- Model: MOVEO PLUS Compute Warranty Discount Policy (Configuration) -->

	<record model="ir.ui.view" id="mv_compute_warranty_discount_policy_tree_view">
		<field name="name">mv.compute.warranty.discount.policy.tree</field>
		<field name="model">mv.compute.warranty.discount.policy</field>
		<field name="arch" type="xml">
			<tree string="MOVEO PLUS Compute Warranty Discount Policy LIST" duplicate="false" default_order="compute_date desc">
				<field name="name" string="Tháng/Năm"/>
				<field name="state" string="Trạng thái" widget="badge" decoration-success="state == 'done'" decoration-info="state == 'confirm'" decoration-muted="state == 'draft'"/>
			</tree>
		</field>
	</record>

	<record model="ir.ui.view" id="mv_compute_warranty_discount_policy_form_view">
		<field name="name">mv.compute.warranty.discount.policy.form</field>
		<field name="model">mv.compute.warranty.discount.policy</field>
		<field name="arch" type="xml">
			<form string="MOVEO PLUS Compute Warranty Discount Policy FORM" duplicate="false">
				<header>
					<field name="do_readonly" invisible="True"/>
<!--					<button class="btn btn-info" name="print_report" string="Xuất báo cáo Excel" type="object" invisible="state not in ['confirm', 'done']"/>-->
					<button class="btn btn-primary" name="action_calculate_discount_line" type="object" string="Tính chiết khấu" invisible="state != 'draft'"/>
					<button class="btn btn-primary" name="action_done" type="object" string="Duyệt" invisible="not id or state in ['draft', 'done']"/>
					<button class="btn btn-secondary" name="action_reset" type="object" string="Hủy" invisible="not id or state != 'confirm'"/>
					<field name="state" widget="statusbar" statusbar_visible="draft,confirm"/>
				</header>
				<sheet>
					<group class="col-8">
						<label for="warranty_discount_policy_id" string="Chính sách áp dụng"/>
						<div class="o_row">
							<field name="warranty_discount_policy_id" required="1" readonly="do_readonly" options="{'no_open': True, 'no_create': True}"/>
						</div>
					</group>
					<group/>
					<group class="col-4">
						<label for="month" string="Tháng"/>
						<div class="o_row flex-grow-0">
							<field name="month" required="warranty_discount_policy_id" readonly="not warranty_discount_policy_id or do_readonly"/>
							/
							<field name="year" required="warranty_discount_policy_id" readonly="not warranty_discount_policy_id or do_readonly"/>
						</div>
						<field name="compute_date" invisible="True"/>
					</group>
					<notebook>
						<page string="Chi tiết">
							<field name="line_ids" nolabel="1" readonly="True" context="{'default_parent_id': id}">
								<tree default_order="partner_id">
									<field name="currency_id" column_invisible="True"/>
									<field name="parent_compute_date" column_invisible="True"/>
									<field name="partner_id" string="Đại lý"/>
									<field name="product_activation_count" string="Tổng số lượng lốp kích hoạt"/>
									<field name="first_warranty_policy_requirement_id" string="Điều kiện 1"/>
									<field name="first_warranty_policy_money" string="Tiền chiết khấu" optional="show"/>
									<field name="first_warranty_policy_total_money" string="Thành tiền" optional="show"/>
									<field name="second_warranty_policy_requirement_id" string="Điều kiện 2"/>
									<field name="second_warranty_policy_money" string="Tiền chiết khấu" optional="show"/>
									<field name="second_warranty_policy_total_money" string="Thành tiền" optional="show"/>
									<field name="third_warranty_policy_requirement_id" string="Điều kiện 3" optional="hidden"/>
									<field name="third_warranty_policy_money" string="Tiền chiết khấu" optional="hidden"/>
									<field name="third_warranty_policy_total_money" string="Thành tiền" optional="hidden"/>
									<field name="total_amount_currency" string="Tổng số tiền" widget="monetary"/>
								</tree>
							</field>
						</page>
					</notebook>
				</sheet>
				<div class="oe_chatter">
					<field name="message_follower_ids"/>
					<field name="message_ids"/>
				</div>
			</form>
		</field>
	</record>

	<record id="mv_compute_warranty_discount_policy_action_view" model="ir.actions.act_window">
		<field name="name">Tính chiết khấu kích hoạt</field>
		<field name="res_model">mv.compute.warranty.discount.policy</field>
		<field name="view_mode">tree,form</field>
		<field name="view_id" ref="mv_compute_warranty_discount_policy_tree_view"/>
	</record>

	<!-- Model: MOVEO PLUS Compute Warranty Discount Policy Line (Configuration) -->

	<record model="ir.ui.view" id="mv_compute_warranty_discount_policy_line_form_view">
		<field name="name">mv.compute.warranty.discount.policy.line.form</field>
		<field name="model">mv.compute.warranty.discount.policy.line</field>
		<field name="arch" type="xml">
			<form duplicate="false">
				<sheet>
					<field name="currency_id" invisible="True"/>
					<field name="parent_id" invisible="True"/>
					<field name="parent_compute_date" invisible="True"/>
					<group class="col-8">
						<label for="partner_id" string="Đại lý"/>
						<div class="o_row">
							<field name="partner_id" options="{'no_open': True}"/>
						</div>
					</group>
					<group>
						<field name="product_activation_count" string="Số lượng lốp kích hoạt" readonly="True"/>
						<field name="total_amount_currency" string="Tổng tiền chiết khấu" widget="monetary"/>
					</group>
					<group>
						<group string="Điều kiện 1">
							<field name="first_warranty_policy_requirement_id" string="Yêu cầu" options="{'no_open': True}"/>
							<field name="first_warranty_policy_money" string="Tiền chiết khấu/lốp" widget="monetary"/>
							<field name="first_warranty_policy_total_money" string="Thành tiền" widget="monetary" readonly="True"/>
						</group>
						<group string="Điều kiện 2">
							<field name="second_warranty_policy_requirement_id" string="Yêu cầu" options="{'no_open': True}"/>
							<field name="second_warranty_policy_money" string="Tiền chiết khấu/lốp" widget="monetary"/>
							<field name="second_warranty_policy_total_money" string="Thành tiền" widget="monetary" readonly="True"/>
						</group>
					</group>
					<notebook>
						<page string="Phiếu" name="page_tickets">
							<field name="helpdesk_ticket_ids" nolabel="1">
								<tree default_order="id">
									<field name="name" string="Ref." optional="hidden"/>
									<field name="partner_id" string="Đại lý" options="{'no_open': True}" optional="show"/>
									<field name="ticket_type_id" string="Loại phiếu" options="{'no_open': True}" optional="show"/>
									<field name="helpdesk_ticket_product_move_ids" string="Mã kích hoạt" widget="many2many_tags" optional="hidden"/>
								</tree>
							</field>
						</page>
					</notebook>
				</sheet>
			</form>
		</field>
	</record>
</odoo>
