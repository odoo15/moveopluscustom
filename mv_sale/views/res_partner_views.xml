<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<record id="view_partner_form_mv_sale" model="ir.ui.view">
		<field name="name">view_partner_form_mv_sale</field>
		<field name="model">res.partner</field>
		<field name="inherit_id" ref="base.view_partner_form"/>
		<field name="arch" type="xml">
			<xpath expr="//notebook" position="inside">
				<page string="Chiết khấu" name="page_partner_discount">
					<group>
						<field name="amount" readonly="True"/>
						<field name="is_agency"/>
						<field name="is_white_agency"/>
						<field name="discount_id"  options="{'no_open': True, 'no_create': True}"/>
						<label for="bank_guarantee"/>
						<div class="o_row">
							<field name="bank_guarantee"/>
							-
							<field name="discount_bank_guarantee" invisible="bank_guarantee == False"/>
						</div>
					</group>
					<field name="line_ids" nolabel="1" context="{'default_parent_id': discount_id, 'default_partner_id': id}">
						<tree default_order="partner_id desc level" create="false" edit="false" delete="false">
							<field name="parent_id" string="Chính sách chiết khấu"/>
							<field name="partner_id" string="Khách hàng / Đại lý"/>
							<field name="date" string="Ngày hiệu lực"/>
							<field name="level" string="Cấp bậc"/>
							<field name="min_debt"/>
							<field name="max_debt"/>
							<field name="number_debt"/>
						</tree>
					</field>
				</page>
				<page string="Chi tiết chiết khấu">
					<field name="compute_discount_line_ids" nolabel="1" readonly="True">
						<tree default_order="id desc">
							<field name="partner_sales_state" decoration-success="partner_sales_state in ['qualified', 'qualified_by_approving']" decoration-warning="partner_sales_state == 'imqualified'" widget="badge" optional="hidden"/>
							<field name="name" string="Tháng/Năm"/>
							<field name="quantity" string="Số lượng lốp đã bán"/>
							<field name="quantity_from" optional="hidden"/>
							<field name="quantity_to" optional="hidden"/>
							<field name="amount_total" string="Doanh thu" widget="monetary" sum="Total Amount of Month"/>
							<field name="is_month" column_invisible="True"/>
							<field name="month" optional="hidden"/>
							<field name="month_money" string="CK Tháng" widget="monetary" sum="Discount Month"/>
							<field name="is_two_month" column_invisible="True"/>
							<field name="amount_two_month" optional="hidden"/>
							<field name="two_month" optional="hidden"/>
							<field name="two_money" string="CK 2 Tháng" widget="monetary" sum="Discount Two Months"/>
							<field name="is_quarter" column_invisible="True"/>
							<field name="quarter" optional="hidden"/>
							<field name="quarter_money" string="CK Quý" widget="monetary" sum="Discount quarter"/>
							<field name="is_year" column_invisible="True"/>
							<field name="year" optional="hidden"/>
							<field name="year_money" string="CK Năm" widget="monetary" sum="Discount year"/>
							<field name="promote_discount_percentage" optional="hidden"/>
			                <field name="promote_discount_money" string="CK Khuyến Khích" widget="monetary" sum="Promote Discount"/>
			                <field name="total_money" string="Tổng tiền" widget="monetary" sum="Total money"/>
                            <field name="currency_id" column_invisible="True"/>
						</tree>
					</field>
				</page>
				<page string="Đơn hàng chiết khấu tháng">
					<field name="sale_mv_ids" nolabel="1" readonly="True">
						<tree default_order="id desc">
							<field name="name" string="Đơn hàng"/>
							<field name="bonus_order" string="Số tiền đã chiết khấu" widget="monetary" options="{'currency_field': 'currency_id'}"/>
							<field name="state" widget="badge" decoration-info="state == 'draft'" decoration-success="state == 'sale'"/>
							<field name="currency_id" column_invisible="True"/>
						</tree>
					</field>
					<group name="total_group" col="6" class="mt-2 mt-md-0">
                        <group colspan="4"/>
                        <group class="oe_subtotal_footer" colspan="2" name="sale_bonus_order_total">
                            <field name="total_so_bonus_order" colspan="2" readonly="True"/>
                        </group>
                        <div class="clearfix"/>
                    </group>
				</page>
			</xpath>
		</field>
	</record>
</odoo>
